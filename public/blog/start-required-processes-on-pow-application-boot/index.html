<!DOCTYPE html>
<!--[if lt IE 7 ]>	<html class="ie ie6 lte9 lte8 lte7"> <![endif]--> 
<!--[if IE 7 ]>		<html class="ie ie7 lte9 lte8 lte7"> <![endif]--> 
<!--[if IE 8 ]>		<html class="ie ie8 lte9 lte8"> <![endif]--> 
<!--[if IE 9 ]>		<html class="ie ie9 lte9"> <![endif]--> 
<!--[if (gt IE 9)|!(IE)]><!--> <html> <!--<![endif]-->
<head>
<!--
 _     _             _       
| |   / /           (_)      
| |_ / / ____ _   _ _ ____  
|  _  | | ___ | | | | |  _ \ 
| |  \ \| ____|\ V /| | | | |
|_|   \_)_____) \_/ |_|_| |_|                        
 _______ _                                        
(__   __) |                                       
   | |  | |__   ___  ____  ____   ___  ___  ____  
   | |  |  _ \ / _ \|    \|  _ \ /___)/ _ \|  _ \ 
   | |  | | | | |_| | | | | |_| |___ | |_| | | | |
   |_|  |_| |_|\___/|_|_|_|  __/(___/ \___/|_| |_|
                          |_|  
-->
<meta charset="utf-8"> 
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Start Required Processes on Pow Application Boot | Kevin Thompson</title>
<meta name="description" content="Kevin Thompson is an web application developer and user experience engineer from Oceanside, Ca"> 
<meta name="keywords" content="Kevin Thompson, web development in san diego, web developer in san diego, san diego user experience, small business website, expressionengine developer"> 
<meta name="author" content="Kevin Thompson"> 
<meta name="copyright" content="Kevin Thompson">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;"> 
<link rel="icon" href="/favicon.ico" type="image/x-icon" /> 
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" /> 
<link rel="stylesheet" href="/css/reset.css" media="all" />
<link rel="stylesheet" href="/css/fonts.css" media="all" />
<link rel="stylesheet" href="/css/screen.css" media="all" />
<link rel="stylesheet" href="/css/print.css" media="print" />
<script type="text/javascript">
	var html = document.getElementsByTagName('html')[0];
	html.className = (html.className != '' ? html.className + ' ' : '') + 'js';
	/mobile/i.test(navigator.userAgent) && !location.hash && setTimeout(function () { window.scrollTo(0, 1); }, 1000);
</script>
<!--[if lt IE 9]><script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js">IE7_PNG_SUFFIX=".png";</script><![endif]-->
<!-- Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24584832-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body class=" blog single-entry">
<header>
  <div class="module rounded-bottom dark">
    <h1 class="logo h2"><a href="/">Kevin Thompson</a></h1>
    <ul class="menu">
      <li>
        <a href="/blog/" data-icon="N" class="bevel" title="Blog">Blog</a> 
        <a href="/blog/start-required-processes-on-pow-application-boot/" class="latest-post">Start Required Processes on Pow Application Boot</a>
      </li>
    </ul>
  </div>
</header>
<div class="page">
  
  <div class="line">
  <div class="unit size-two-thirds pvn">
    <article class="post">  
      <div class="module">
        <h1 class="title">Start Required Processes on Pow Application Boot</h1>
        <span class="date">April 29, 2012</span>
        <p>Using <a href="http://pow.cx/">Pow</a> to serve your Rack apps makes managing multiple applications a breeze, but you may still find yourself manually starting up additional processes that your apps depend on. Luckily, Pow provides us with a few hooks to automate these processes as well.</p>

<!-- more -->


<p>In the <a href="http://pow.cx/manual.html">Pow Manual</a> under section 2.2, &ldquo;<a href="http://pow.cx/manual.html#section_2.2">Customizing Environment Variables</a>&rdquo;, we&rsquo;re given an overview of how we might customize the environment for our worker processes through the <code>.powrc</code> and <code>.powenv</code> files. However, because these files simply execute a series of bash commands, we can add much more than environment variable exports to our application boot process.</p>

<p>For example, most of the projects I&rsquo;ve been contributing to lately use MongoDB, and as such, I need to have an instance of the <code>mongod</code> process running in order to connect to my databases. To avoid the inevitable application startup error, or having to manually check for an existing MongoDB process, I can simply add the following code to my <code>.powrc</code> file:</p>

<pre><code># Start MongoDB
if ! ps ax | grep -v grep | grep 'mongod' &gt; /dev/null
then
  mongod -port 27017 &lt;/dev/null &amp;&gt;/dev/null &amp;
fi
</code></pre>

<p>These few lines are all I need to check for a <code>mongod</code> process, and automatically start it if it&rsquo;s not already running when my application is booted.</p>

<p>If you want to test the functionality in your <code>.rvmrc</code> file, you can run the files directly from your project directory: <code>./.rvmrc</code>. If you&rsquo;re going to be executing this file directly, I would recommend rounding out your code with a few echos for clarity:</p>

<pre><code>if ! ps ax | grep -v grep | grep 'mongod' &gt; /dev/null
then
  echo "Starting MongoDB server..."
  mongod -port 27017 &lt;/dev/null &amp;&gt;/dev/null &amp;
  echo "MongoDB is now up and running."
else
  echo "Relax bro. MongoDB is already running."
fi
</code></pre>

      </div>
    </article>
  </div>
  <div class="last unit size-one-third ptm">
    
    






  
  

  
    
    
  

  
  

  
  
    
    
  

  

  
  

  
  

  

  
  

  
  

  

  
  

  
  

  

  
  

  
  

  

  
  

  
  

  

  
  

  
  

  

  
  


<div class="post-nav sticky">
  <ul class="article-nav mbn clear">
    <li class="previous"><a href="/blog/iphone-and-ipad-browser-testing-using-the-ios-simulator" >&laquo; Previous Post</a></li> 
    
  </ul>
</div>
  </div>
  <div class="line">
    <div class="unit size-two-thirds">
      <hr class="hires" />
      <section class="comments module">
  <h1>Comments</h1>
  
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'kevinthompson'; // required: replace example with your forum shortname

      // The following are highly recommended additional parameters. Remove the slashes in front to use.
      // var disqus_identifier = 'unique_dynamic_id_1234';
      // var disqus_url = 'http://example.com/permalink-to-page.html';

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</section>

<hr />
    </div>
    <div class="last unit size-one-third"></div>
  </div>
</div>

  <div class="module dark footer">
    <div class="divided line">
      <div class="equal unit size-one-half">
        <h3>Who's this Kevin Thompson character?</h3>
        <p>Mild-mannered developer by day, caffeine-fueled autodidact by night. I leverage my talent and experience as a professional web developer to help people solve problems and build successful businesses.</p>
        <p>You can glean more by perusing <a href="/blog/">my blog</a> or taking a look at <a href="http://github.com/kevinthompson">my code</a>, and if you have any questions <a href="mailto:kevin@kevinthompson.info">email me</a> and we can chat.</p>
      </div>
      <div class="equal unit size-one-fourth">
        <hr class="lores" />
        <dl>
          <dt>Email</dt>
          <dd><a href="mailto:{contact-email}">kevin@kevinthompson.info</a></dd>
      
          <dt>Skype</dt>
          <dd><a href="skype:{contact-skype}?add">thompson.kevind</a></dd>
        </dl>
      </div>
      <div class="last equal unit size-one-fourth">
        <hr class="lores" />
        <h3>Looking for more?</h3>
        <ul class="social">
          <li><a href="/feed/index.xml" class="rss-link">Subscribe to My Blog</a></li>
          <li><a href="http://twitter.com/kevinthompson" class="twitter-link">Follow Me on Twitter</a><span class="twitter-follow-button"></span></li>
          <li><a href="http://github.com/kevinthompson">Dissect My Code on Github</a></li>
          <li><a href="http://linkedin.com/in/kevindthompson">View My Resume on LinkedIn</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
<footer>
  <span class="small copyright">&copy; Kevin Thompson 2012 &mdash; Code, Content &amp; Design</span>
  <a href="http://twitter.com/kevinthompson" class="twitter-follow-button" data-align="right" data-text-color="888888" data-link-color="3ba1b3">Follow @kevinthompson</a>
  <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
</footer>

<!-- Load jQuery -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script>!window.jQuery && document.write(unescape('%3Cscript src="/js/jquery.min.js"%3E%3C/script%3E'))</script>

<!-- Load JavaScript -->
<script src="/js/jquery.equalHeightColumns.js"></script>
<script src="/js/jquery.sticky.js"></script>
<script src="/js/jquery.touchSwipe.js"></script>
<script src="/js/jquery.pjax.js"></script> 
<script src="/js/github.js"></script> 
<script src="/js/script.js"></script>
  
</body>
</html>